<%= form_for @math_model, :html => { :class => 'form-horizontal' } do |f| %>
  <div class="form-group">
    <%= f.label :name, :class => 'col-sm-2 control-label' %>
    <div class="col-sm-10">
      <%= f.text_field :name, :class => 'form-control' %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :machine_id, :class => 'col-sm-2 control-label' %>
    <div class="col-sm-10">
      <%= f.select :machine_id, options_for_select( Machine.all.collect { |m| [ m.name, m.id ] }, (params[:machine_id] || @math_model.machine_id)), {}, :class => 'form-control' %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :version, :class => 'col-sm-2 control-label' %>
    <div class="col-sm-10">
      <%= f.number_field :version, :class => 'form-control' %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :wild_type, :class => 'col-sm-2 control-label' %>
    <div class="col-sm-10">
      <%= f.text_field :wild_type, :class => 'form-control' %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :free_spins_multipliers, :class => 'col-sm-2 control-label' %>
    <div class="col-sm-10">
      <%= f.number_field :free_spins_multipliers, :class => 'form-control' %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :num_free_spins, :class => 'col-sm-2 control-label' %>
    <div class="col-sm-10">
      <%= f.number_field :num_free_spins, :class => 'form-control' %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :size_x, :class => 'col-sm-2 control-label' %>
    <div class="col-sm-10">
      <%= f.number_field :size_x, :class => 'form-control' %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :size_y, :class => 'col-sm-2 control-label' %>
    <div class="col-sm-10">
      <%= f.number_field :size_y, :class => 'form-control' %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :num_pay_lines, :class => 'col-sm-2 control-label' %>
    <div class="col-sm-10">
      <%= f.number_field :num_pay_lines, :class => 'form-control' %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :is_irregular, :class => 'col-sm-2 control-label' %>
    <div class="col-sm-10">
      <%= f.check_box :is_irregular %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :is_special, :class => 'col-sm-2 control-label' %>
    <div class="col-sm-10">
      <%= f.check_box :is_special  %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :description, :class => 'col-sm-2 control-label' %>
    <div class="col-sm-10">
      <%= f.text_area :description, :class => 'form-control' %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :active, :class => 'col-sm-2 control-label' %>
    <div class="col-sm-10">
      <%= f.check_box :active %>
    </div>
  </div>
  

  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
      <%= f.submit nil, :class => 'btn btn-primary' %>
      <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                edit_machine_path(@machine), :class => 'btn btn-default' %>
    </div>
  </div> 
<% end %>

<hr />

<% unless @math_model.new_record? %>
  <ul>
    <li>
      Pay Lines
      <ul>
        <% @math_model.pay_lines.order("label, x asc").group_by(&:label).collect do |label, lines| %>
          <li>
            <b><%= label %></b>
            <ul>
              <% lines.each do |pay_line| %>
                <li>
                  <%= "(#{pay_line.x}, #{pay_line.y})" %>
                  <%= link_to "Edit", edit_pay_line_path(id: pay_line.id) %>
                  <%= link_to "X", pay_line_path(pay_line), method: :delete, :data => { :confirm => 'Are you sure?' }, class: "delete" %>
                </li>
              <% end %>
            </ul>
          </li>
        <% end %>
        <li><%= link_to "Pay Line", pay_lines_math_model_path(id: @math_model.id) %></li>
      </ul>
    </li>
    <li>
      Pay Tables
      <ul>
        <% @math_model.pay_tables.each do |pay_table| %>
          <li>
            <%= "#{pay_table.symbol}(#{pay_table.count}) -> #{pay_table.points}" %>
            <%= link_to "Edit", edit_pay_table_path(id: pay_table.id) %>
            <%= link_to "X", pay_table_path(pay_table), method: :delete, :data => { :confirm => 'Are you sure?' }, class: "delete" %>
          </li>
        <% end %>
        <li><%= link_to "Pay Table", pay_tables_math_model_path(id: @math_model.id) %></li>
      </ul>
    </li>
    <li>
      Reels
      <ul>
        <li>
        <% @math_model.reels.group_by(&:label).collect do |label, reels| %>
          <b><%= label %></b>
          <ul>
            <% reels.each do |reel| %>
              <li>
                <%= reel.symbol %>
                <%= link_to "Edit", edit_reel_path(id: reel.id) %>
                <%= link_to "X", reel_path(reel), method: :delete, :data => { :confirm => 'Are you sure?' }, class: "delete" %>
              </li>
            <% end %>
          </ul>
        <% end %>
        <li><%= link_to "New Reel", new_reel_path(math_model_id: @math_model.id) %></li>
      </ul>
    </li>
    <li>
      Stamps
      <ul>
        <% @math_model.stamps.each do |stamp| %>
          <li>
            <%= "#{stamp.name}" %>
            <%= link_to "Edit", edit_stamp_path(id: stamp.id) %>
            <%= link_to "X", stamp_path(stamp), method: :delete, :data => { :confirm => 'Are you sure?' }, class: "delete" %>
          </li>
        <% end %>
        <li><%= link_to "New Stamp", new_stamp_path(math_model_id: @math_model.id) %></li>
      </ul>
    </li>
  </ul>
<% end %>